<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cube Tag – AZERTY Fix</title>
  <style>
    html,body { margin:0; height:100%; background:#0b0b0b; color:#eee; font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    #hud { position:fixed; top:12px; left:12px; padding:8px 10px; background:rgba(0,0,0,0.5); border-radius:8px; }
    .row { margin:2px 0; font-size:14px; }
    #options{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; }
    #optPanel{ width:min(560px,94vw); background:#181818; border-radius:14px; padding:18px; }
    table{ width:100%; border-collapse:collapse; }
    td{ padding:8px 10px; border-bottom:1px solid #2a2a2a; }
    .keybtn{ padding:6px 10px; border-radius:10px; background:#2b2b2b; border:1px solid #3a3a3a; cursor:pointer; }
    .btn{ padding:8px 12px; border-radius:10px; border:0; background:#5d8cff; color:#fff; font-weight:600; cursor:pointer; }
    #openOpt{ cursor:pointer; text-decoration:underline; }
  </style>
  <script type="importmap">
  { "imports": {
      "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
  } }
  </script>
</head>
<body>
  <div id="hud">
    <div class="row"><b>Cube Tag</b> — <span id="openOpt">Options (O)</span></div>
    <div class="row">Salon: <span id="room">–</span> • Ping: <span id="ping">–</span></div>
    <div id="status" class="row">Hors ligne…</div>
  </div>

  <div id="lobby" style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.6)">
    <div style="width:min(480px,92vw); background:#181818; padding:18px; border-radius:14px">
      <h3>Rejoindre</h3>
      <div><input id="name" placeholder="Pseudo" style="width:100%; padding:10px; border-radius:8px; border:1px solid #333; background:#121212; color:#eee; margin-bottom:8px;"></div>
      <div><input id="roomInput" placeholder="Salon (public)" style="width:100%; padding:10px; border-radius:8px; border:1px solid #333; background:#121212; color:#eee; margin-bottom:8px;"></div>
      <div style="text-align:right"><button id="joinBtn" class="btn">Rejoindre</button></div>
    </div>
  </div>

  <div id="options">
    <div id="optPanel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Options</h3>
        <button id="closeOpt" class="btn" style="background:#444">Fermer</button>
      </div>
      <h4>Clavier</h4>
      <table>
        <tr>
          <td>Disposition</td>
          <td>
            <select id="layoutSel">
              <option value="azerty">AZERTY (ZQSD)</option>
              <option value="qwerty">QWERTY (WASD)</option>
            </select>
          </td>
        </tr>
        <tr><td>Avancer</td><td><button class="keybtn" data-action="forward"></button></td></tr>
        <tr><td>Gauche</td><td><button class="keybtn" data-action="left"></button></td></tr>
        <tr><td>Reculer</td><td><button class="keybtn" data-action="back"></button></td></tr>
        <tr><td>Droite</td><td><button class="keybtn" data-action="right"></button></td></tr>
        <tr><td>Saut</td><td><button class="keybtn" data-action="jump"></button></td></tr>
        <tr><td>Sprint</td><td><button class="keybtn" data-action="sprint"></button></td></tr>
      </table>
      <div style="margin-top:10px; font-size:12px; opacity:.8">Astuce : pour les lettres on sauvegarde la <b>touche réelle</b> (e.key) — parfait pour AZERTY. Pour Espace/Shift/Ctrl, on sauvegarde le <b>code</b> (e.code).</div>
      <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:14px">
        <button id="resetOpt" class="btn" style="background:#666">Réinitialiser</button>
        <button id="saveOpt" class="btn">Sauvegarder</button>
      </div>
    </div>
  </div>

  <script type="module" src="./client.js"></script>
</body>
</html>
